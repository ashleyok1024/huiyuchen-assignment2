{"ast":null,"code":"import { toast } from \"react-toastify\";\nexport const COLORS = [\"blue\", \"red\", \"orange\"];\nexport const SHAPES = [\"diamond\", \"heart\", \"oval\"];\nexport const SHADINGS = [\"empty\", \"stripe\", \"solid\"];\nexport const NUMS = [\"one\", \"two\", \"three\"];\nexport function createDeck(level) {\n  let deck = []; //easy mode -27 cards\n\n  if (level === \"easy\") {\n    for (let i = 0; i < SHAPES.length; i++) {\n      for (let j = 0; j < COLORS.length; j++) {\n        for (let k = 0; k < NUMS.length; k++) {\n          deck.push({\n            selectStatus: \"unselect\",\n            path: \"card/\" + COLORS[j] + \"/\" + SHAPES[i] + \"/\" + SHADINGS[0] + \"/\" + NUMS[k] + \".svg\",\n            color: COLORS[j],\n            shape: SHAPES[i],\n            shading: SHADINGS[0],\n            num: NUMS[k]\n          });\n          console.log(deck);\n        }\n      }\n    } // normal or heard mode-81 cards\n\n  } else {\n    for (let i = 0; i < SHAPES.length; i++) {\n      for (let j = 0; j < COLORS.length; j++) {\n        for (let k = 0; k < NUMS.length; k++) {\n          for (let n = 0; n < SHADINGS.length; n++) {\n            deck.push({\n              selectStatus: \"unselect\",\n              path: \"card/\" + COLORS[j] + \"/\" + SHAPES[i] + \"/\" + SHADINGS[n] + \"/\" + NUMS[k] + \".svg\",\n              color: COLORS[j],\n              shape: SHAPES[i],\n              shading: SHADINGS[n],\n              num: NUMS[k]\n            });\n          }\n        }\n      }\n    }\n  }\n\n  return shuffle(deck);\n}\nexport function startNewGame(state) {\n  const newDeck = createDeck(state.level);\n  const newTable = newDeck.slice(0, 12);\n  const deckRemaining = newDeck.slice(12, 81);\n  let newState = { ...state,\n    deck: deckRemaining,\n    tableShow: newTable,\n    selected: []\n  };\n  return checkGameStatus(newState);\n}\n\nfunction shuffle(deck) {\n  for (let i = deck.length - 1; i > 0; i--) {\n    let j = Math.floor(Math.random() * i);\n    let temp = deck[i];\n    deck[i] = deck[j];\n    deck[j] = temp;\n  }\n\n  return deck;\n}\n\nexport function selectCard(state, action) {\n  let NewTableShow = [];\n  let selectedCardUrl = action.value;\n  let newSelected = state.selected;\n\n  for (let i = 0; i < state.tableShow.length; i++) {\n    let curCard = state.tableShow[i];\n\n    if (curCard.path === selectedCardUrl) {\n      // allow user to change a card they've been selected\n      if (curCard.selectStatus === \"selected\") {\n        let SelectedCard = { ...curCard,\n          selectStatus: \"unselect\"\n        };\n        NewTableShow.push(SelectedCard);\n        newSelected.pop(curCard);\n      } else {\n        let NewSelectedCard = { ...curCard,\n          selectStatus: \"selected\"\n        };\n        NewTableShow.push(NewSelectedCard);\n        newSelected.push(NewSelectedCard);\n      }\n    } else {\n      NewTableShow.push(curCard);\n    }\n  }\n\n  let newState = { ...state,\n    selected: newSelected,\n    tableShow: NewTableShow\n  };\n\n  if (newState.selected.length < 3 || !newState.selected) {\n    return newState;\n  } else {\n    if (isValidSet(newState.selected)) {\n      toast.success(\"Woo!! You Find A Set!\");\n      return replaceAnotherThree(newState);\n    } else {\n      toast.warn(\"Please Try Again!It's Not A Set!\");\n      return refreshSelected(newState);\n    }\n  }\n}\n\nfunction isValidSet(selected) {\n  let shadingSet = new Set();\n  let numSet = new Set();\n  let colorSet = new Set();\n  let shapeSet = new Set();\n\n  for (let i = 0; i < 3; i++) {\n    colorSet.add(selected[i].color);\n    shapeSet.add(selected[i].shape);\n    shadingSet.add(selected[i].shading);\n    numSet.add(selected[i].num);\n  } //all same(1) or all different(3)\n\n\n  if (shadingSet.size === 2 || numSet.size === 2 || colorSet.size === 2 || shapeSet.size === 2) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction replaceAnotherThree(state) {\n  let newDeck = state.deck;\n  let newTableShow = [];\n\n  for (let i = 0; i < state.tableShow.length; i++) {\n    let curCard = state.tableShow[i];\n\n    if (curCard.selectStatus === \"unselect\") {\n      newTableShow.push(curCard);\n    }\n  }\n\n  for (let j = 0; j < 3; j++) {\n    if (newDeck.length > 0 && state.tableShow.length <= 12) {\n      newTableShow.push(newDeck.pop());\n    }\n  }\n\n  let newState = { ...state,\n    deck: newDeck,\n    tableShow: newTableShow,\n    selected: []\n  };\n  return checkGameStatus(newState);\n}\n\nexport function draw3Cards(state) {\n  let cards = state.deck.slice(0, 3);\n  let newDeck = state.deck.slice(3, state.deck.length);\n  let newTableShow = state.tableShow.concat(cards);\n  let newState = { ...state,\n    tableShow: newTableShow,\n    deck: newDeck,\n    selected: state.selected\n  };\n  return checkGameStatus(newState);\n}\n\nfunction checkGameStatus(newState) {\n  while (newState.deck.length > 0 && newState.level !== \"hard\" && !setOnTable(newState.tableShow)) {\n    newState = draw3Cards(newState);\n  }\n\n  if (newState.deck.length === 0 && !setOnTable(newState.tableShow)) {\n    toast.info(\"Congrats! GAME END! You will be back to Mode Option Page.\", {\n      autoClose: 4000,\n      position: toast.POSITION.BOTTOM_CENTER\n    });\n    return {\n      gameStarted: false,\n      mode: \"normal\",\n      deck: [],\n      onTable: [],\n      selectedCards: []\n    };\n  }\n\n  console.log(\"Is there a SET on the table? \", setOnTable(newState.tableShow));\n  return newState;\n}\n\nfunction refreshSelected(state) {\n  let newTableShow = [];\n\n  for (let i = 0; i < state.tableShow.length; i++) {\n    let curCard = state.tableShow[i];\n\n    if (curCard.selectStatus !== \"unselect\") {\n      newTableShow.push({ ...curCard,\n        selectStatus: \"unselect\"\n      });\n    } else {\n      newTableShow.push(curCard);\n    }\n  }\n\n  const newState = { ...state,\n    tableShow: newTableShow,\n    selected: []\n  };\n  return newState;\n} // show index of valid set in console \n\n\nfunction setOnTable(tableShow) {\n  if (!tableShow) {\n    return false;\n  }\n\n  for (let i = 0; i < tableShow.length; i++) {\n    for (let j = i + 1; j < tableShow.length; j++) {\n      for (let k = j + 1; k < tableShow.length; k++) {\n        let curSet = [tableShow[i], tableShow[j], tableShow[k]];\n\n        if (isValidSet(curSet)) {\n          console.log(\"Index[\", i, j, k, \"] on the table is a SET.\");\n          return true;\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function endGameAndChangeMode(state) {}","map":{"version":3,"sources":["/Users/huiyuchen/6510_HuiyuChen/HuiyuChen-cs5610-project2-sets-card-game/huiyu-chen-project2/src/Controller/Functions.js"],"names":["toast","COLORS","SHAPES","SHADINGS","NUMS","createDeck","level","deck","i","length","j","k","push","selectStatus","path","color","shape","shading","num","console","log","n","shuffle","startNewGame","state","newDeck","newTable","slice","deckRemaining","newState","tableShow","selected","checkGameStatus","Math","floor","random","temp","selectCard","action","NewTableShow","selectedCardUrl","value","newSelected","curCard","SelectedCard","pop","NewSelectedCard","isValidSet","success","replaceAnotherThree","warn","refreshSelected","shadingSet","Set","numSet","colorSet","shapeSet","add","size","newTableShow","draw3Cards","cards","concat","setOnTable","info","autoClose","position","POSITION","BOTTOM_CENTER","gameStarted","mode","onTable","selectedCards","curSet","endGameAndChangeMode"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\n\nexport const COLORS = [\"blue\", \"red\", \"orange\"]\nexport const SHAPES = [\"diamond\", \"heart\", \"oval\"]\nexport const SHADINGS = [\"empty\", \"stripe\", \"solid\"]\nexport const NUMS = [\"one\",\"two\", \"three\"]\n\nexport function createDeck(level){\n    let deck = []\n    //easy mode -27 cards\n    if (level === \"easy\"){\n        for (let i = 0; i < SHAPES.length; i++ ){\n            for (let j = 0; j < COLORS.length; j++){\n                for(let k = 0; k < NUMS.length; k++){\n                    deck.push({\n                        selectStatus: \"unselect\",\n                        path : \"card/\" + COLORS[j] + \"/\" + SHAPES[i] + \"/\" + SHADINGS[0] + \"/\" + NUMS[k]+\".svg\",\n                        color : COLORS[j],\n                        shape : SHAPES[i],\n                        shading : SHADINGS[0],\n                        num : NUMS[k],\n                    });\n                    console.log(deck);\n                }\n            }\n        }\n        // normal or heard mode-81 cards\n    } else{\n        for (let i = 0; i < SHAPES.length; i++ ){\n            for (let j = 0; j < COLORS.length; j++){\n                for(let k = 0; k < NUMS.length; k++){\n                    for(let n = 0; n < SHADINGS.length; n++){\n                        deck.push({\n                            selectStatus: \"unselect\",\n                            path : \"card/\" + COLORS[j] + \"/\" + SHAPES[i] + \"/\" + SHADINGS[n] + \"/\" + NUMS[k]+\".svg\",\n                            color : COLORS[j],\n                            shape : SHAPES[i],\n                            shading : SHADINGS[n],\n                            num : NUMS[k],\n                        });\n\n                    }\n                }\n            }\n        }\n\n    }\n    return shuffle(deck);\n}\n\n\nexport function startNewGame(state){\n    const newDeck = createDeck(state.level);\n    const newTable = newDeck.slice(0,12);\n    const deckRemaining = newDeck.slice(12,81);\n    let newState = {\n        ...state,\n        deck:deckRemaining,\n        tableShow: newTable,\n        selected:[],\n    }\n    return checkGameStatus(newState);\n}\n\nfunction shuffle(deck) {\n    \n    for (let i = deck.length - 1; i > 0; i--){\n        let j = Math.floor(Math.random() * i);\n        let temp = deck[i];\n        deck[i] = deck[j];\n        deck[j] = temp;\n    }\n\n    return deck;\n}\n\nexport function selectCard(state, action){\n\n    let NewTableShow = [];\n    let selectedCardUrl = action.value;\n    let newSelected = state.selected;\n    \n    for(let i = 0; i< state.tableShow.length; i++){\n        let curCard = state.tableShow[i];\n        if(curCard.path === selectedCardUrl){\n            // allow user to change a card they've been selected\n            if(curCard.selectStatus === \"selected\"){\n                let SelectedCard = {...curCard, selectStatus:\"unselect\"};\n                NewTableShow.push(SelectedCard);\n                newSelected.pop(curCard);\n            }else{\n                let NewSelectedCard = {...curCard, selectStatus:\"selected\"};\n                NewTableShow.push(NewSelectedCard);\n                newSelected.push(NewSelectedCard);\n            }\n        }else{\n            NewTableShow.push(curCard);\n        }\n        \n    }\n\n    let newState = {...state, \n        selected:newSelected, \n        tableShow:NewTableShow};\n\n    if(newState.selected.length<3 || !newState.selected){\n        return newState;\n    }else{\n        if(isValidSet(newState.selected)){\n            toast.success(\"Woo!! You Find A Set!\");\n            return replaceAnotherThree(newState);\n        }else{\n            toast.warn(\"Please Try Again!It's Not A Set!\");\n            return refreshSelected(newState)\n        }\n    }\n\n\n}\nfunction isValidSet(selected){\n    let shadingSet = new Set();\n    let numSet = new Set();\n    let colorSet = new Set();\n    let shapeSet = new Set();\n\n    for (let i=0; i<3; i++){\n        colorSet.add(selected[i].color);\n        shapeSet.add(selected[i].shape);\n        shadingSet.add(selected[i].shading);\n        numSet.add(selected[i].num);\n    }\n    //all same(1) or all different(3)\n    if (shadingSet.size === 2 || numSet.size === 2 ||colorSet.size === 2 || shapeSet.size === 2 ) {\n        return false;\n    }\n\n    return true;\n\n}\n\nfunction replaceAnotherThree(state){\n    let newDeck = state.deck\n    let newTableShow = []\n\n    for(let i = 0; i< state.tableShow.length; i++){\n        let curCard = state.tableShow[i];\n        if (curCard.selectStatus === \"unselect\"){\n            newTableShow.push(curCard)\n        }\n    }\n\n    for(let j = 0; j < 3; j++){\n        if(newDeck.length > 0 && state.tableShow.length <= 12){\n            newTableShow.push(newDeck.pop());\n        }\n    }\n    let newState = {...state, deck: newDeck, tableShow: newTableShow, selected: []};\n    return checkGameStatus(newState);\n\n}\n\nexport function draw3Cards(state){\n    let cards = state.deck.slice(0,3);\n    let newDeck = state.deck.slice(3, state.deck.length);\n    let newTableShow = state.tableShow.concat(cards);\n\n    let newState = {\n        ...state,\n        tableShow : newTableShow,\n        deck :newDeck,\n        selected : state.selected,\n        \n    }\n    return checkGameStatus(newState);\n\n}\n\nfunction checkGameStatus(newState){\n    while (newState.deck.length > 0 && newState.level !== \"hard\" && !setOnTable(newState.tableShow)) {\n        newState = draw3Cards(newState);\n    }\n\n    if (newState.deck.length === 0 && !setOnTable(newState.tableShow)){\n        toast.info(\"Congrats! GAME END! You will be back to Mode Option Page.\",{autoClose:4000, position: toast.POSITION.BOTTOM_CENTER,});\n        return {\n            gameStarted: false, \n            mode: \"normal\", \n            deck: [], \n            onTable:[], \n            selectedCards:[],\n        }\n    }\n    console.log(\"Is there a SET on the table? \",setOnTable(newState.tableShow));\n\n    return newState;\n}\n\nfunction refreshSelected(state){\n    let newTableShow = []\n\n    for(let i = 0; i < state.tableShow.length; i++){\n        let curCard = state.tableShow[i];\n        if(curCard.selectStatus !== \"unselect\"){\n            newTableShow.push({...curCard, selectStatus:\"unselect\",})\n        }else{\n            newTableShow.push(curCard);\n        }\n    }\n    const newState = {...state, tableShow: newTableShow, selected: []};\n    return newState;\n}\n\n// show index of valid set in console \nfunction setOnTable(tableShow){\n    if(!tableShow){\n        return false;\n    }\n    for (let i = 0; i < tableShow.length; i++) {\n        for (let j = i + 1; j < tableShow.length; j++) {\n            for (let k = j + 1; k < tableShow.length; k++) {\n                let curSet = [tableShow[i], tableShow[j], tableShow[k]];\n                if (isValidSet(curSet)){\n                    console.log(\"Index[\",i, j, k, \"] on the table is a SET.\");\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n    \n}\n\nexport function endGameAndChangeMode(state){\n\n}"]},"metadata":{},"sourceType":"module"}